# Copyright © 2024 Navarrotech

project:
  name: Anubis
  version: 1.0.0
  copyright_header: 'Copyright © 2024 Navarrotech'
  description: 'Anubis is a simple and powerful tool for managing your projects.'

# Advanced settings that don't exist yet!
settings:
  scaling: 'horizontal'
  serverless_api: false


# Models are what is used to automatically generate your database, protobufs, API, 
# CRUD routes, and frontend, forms, pages, admin dashboard, etc.
models:
  users:
    fields:
      - name: id
        type: string
        # Use UUID will automatically generate a UUID for the field
        use: uuid
        # Primary key will automatically set the field as the primary key
        primary_key: true

      - name: name
        type: string
        # ReplaceAll will remove all non-numeric characters when a user inputs the data
        replaceAll: /\D/
        min: 3
        max: 64

      - name: email
        type: string

        # Applies to form inputs and validators
        # Validators will automatically check the format of the email
        format: email
        min: 3
        max: 64

      - name: phone
        type: string

        # Applies to form inputs and validators
        # Validators will automatically check the format of the phone number
        # E.164 format is used for phone numbers
        format: phone
        min: 10
        max: 10

      - name: password
        type: string

        # Applies to form inputs and validators
        format: password

        # Encrypt with sha256
        encrypt: true

        # Do not send the password in responses to the user
        replicate: false

        # Can be min or minimum
        minimum: 8
        maximum: 64

        # Custom validation, in this case custom password rules
        match:
          # Regex, must have one capital letter
          - /[A-Z]/
          # Regex, must have one lowercase letter
          - /[a-z]/
          # Regex, must have two numbers
          - /\d{2}/

      - name: language
        type: string

        # Default value upon initialization
        default: en

        # This field is not required.
        # Fields are required by default unless either a default value is given or if required is set to false.
        required: false

        # With Enums, when a code is given that we don't recognize...
        # By default, Anubis will reject it with a 400 error.
        # However we can change this behavior with the option on_unknown
        # Which defines a default value to use when the code is not recognized.
        on_unknown: en
        enum:
          - en
          - es
          - fr
        min: 2
        max: 2

      # This is how a relationship is created between two models.
      # When a user is created, links will also ensure a foreign key is created
      # and will automatically create this model.
      # When a user is deleted, the preferences will also be deleted.
      - name: preferences
        links: preferences
        # This defines that the relationship is one-to-many
        unique: true
        # Instead of unique, you could also define limits with min and max
        max: 1

      - name: created_at
        use: created_at
        type: datetime

      - name: updated_at
        use: updated_at
        type: datetime

  preferences:
    favorite_icecream:
      - name: id
        type: string
        use: uuid
        primary_key: true
      - name: flavor
        type: string
        min: 3
        max: 64
